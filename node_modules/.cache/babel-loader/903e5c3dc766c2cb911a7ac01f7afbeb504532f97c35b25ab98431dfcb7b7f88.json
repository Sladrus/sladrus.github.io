{"ast":null,"code":"import _slicedToArray from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{toJS}from'mobx';import{observer}from'mobx-react-lite';import React,{useContext,useEffect,useState}from'react';import{Card,Container,ListGroup}from'react-bootstrap';import{Link}from'react-router-dom';import{Context}from'..';import DialogModal from'../components/modals/monitoring/DialogModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MonitoringDialogs=observer(function(){var _useContext=useContext(Context),telegramService=_useContext.telegramService;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openShow=_useState2[0],setOpenShow=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),sender=_useState4[0],setSender=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),selectedChat=_useState6[0],setSelectedChat=_useState6[1];useEffect(function(){console.log(toJS(telegramService.senders));},[telegramService.update.length]);return/*#__PURE__*/_jsx(Container,{className:\"p-4 px-4 d-grid\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:/*#__PURE__*/_jsxs(ListGroup.Item,{className:\"d-flex justify-content-between align-items-center text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"m-1 \",style:{width:'10rem'},children:\"\\u0410\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"}),/*#__PURE__*/_jsx(\"div\",{className:\"m-1 \",style:{width:'10rem'},children:\"\\u042E\\u0437\\u0435\\u0440\"}),/*#__PURE__*/_jsx(\"div\",{className:\"m-1 flex-fill\",children:\"\\u041F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0435\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"div\",{className:\"m-1\",style:{width:'5rem'}})]})}),/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:telegramService.chats.map(function(chat){return chat.senders.map(function(sender,index){if(sender.messages.length){return/*#__PURE__*/_jsxs(ListGroup.Item,{className:\"d-flex justify-content-between align-items-center text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"m-1 \",style:{width:'10rem'},children:chat.me.username||chat.me.firstName}),/*#__PURE__*/_jsx(\"div\",{className:\"m-1 \",style:{width:'10rem'},children:sender.username}),/*#__PURE__*/_jsx(\"div\",{className:\"m-1\",style:{width:'35rem'},children:sender.messages[(sender===null||sender===void 0?void 0:sender.messages.length)-1].my?\"Me: \".concat(sender.messages[sender.messages.length-1].message):/*#__PURE__*/_jsx(\"b\",{children:\"\".concat(sender.username||sender.firstName,\": \").concat(sender.messages[sender.messages.length-1].message)})}),/*#__PURE__*/_jsx(\"div\",{className:\"m-1\",style:{width:'5rem'},children:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){setSender(sender);setSelectedChat(chat);setOpenShow(true);},children:\"\\u041D\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\"})})]},index);}});})}),/*#__PURE__*/_jsx(DialogModal,{show:openShow,onHide:setOpenShow,senderData:sender,chat:selectedChat})]})});});export default MonitoringDialogs;","map":{"version":3,"names":["toJS","observer","React","useContext","useEffect","useState","Card","Container","ListGroup","Link","Context","DialogModal","MonitoringDialogs","telegramService","openShow","setOpenShow","sender","setSender","selectedChat","setSelectedChat","console","log","senders","update","length","width","chats","map","chat","index","messages","me","username","firstName","my","message"],"sources":["C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/src/pages/MonitoringDialogs.js"],"sourcesContent":["import { toJS } from 'mobx';\r\nimport { observer } from 'mobx-react-lite';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { Card, Container, ListGroup } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { Context } from '..';\r\nimport DialogModal from '../components/modals/monitoring/DialogModal';\r\n\r\nconst MonitoringDialogs = observer(() => {\r\n  const { telegramService } = useContext(Context);\r\n\r\n  const [openShow, setOpenShow] = useState(false);\r\n  const [sender, setSender] = useState({});\r\n  const [selectedChat, setSelectedChat] = useState({});\r\n\r\n  useEffect(() => {\r\n    console.log(toJS(telegramService.senders));\r\n  }, [telegramService.update.length]);\r\n\r\n  return (\r\n    <Container className=\"p-4 px-4 d-grid\">\r\n      <Card>\r\n        <ListGroup variant=\"flush\">\r\n          <ListGroup.Item className=\"d-flex justify-content-between align-items-center text-center\">\r\n          <div className=\"m-1 \" style={{ width: '10rem' }}>\r\n              Аккаунт\r\n            </div>\r\n            <div className=\"m-1 \" style={{ width: '10rem' }}>\r\n              Юзер\r\n            </div>\r\n            <div className=\"m-1 flex-fill\">Последнее сообщение</div>\r\n            <div className=\"m-1\" style={{ width: '5rem' }}></div>\r\n          </ListGroup.Item>\r\n        </ListGroup>\r\n        <ListGroup variant=\"flush\">\r\n          {telegramService.chats.map((chat) => {\r\n            return chat.senders.map((sender, index) => {\r\n              if (sender.messages.length) {\r\n                return (\r\n                  <ListGroup.Item\r\n                    key={index}\r\n                    className=\"d-flex justify-content-between align-items-center text-center\"\r\n                  >\r\n                    <div className=\"m-1 \" style={{ width: '10rem' }}>\r\n                      {chat.me.username || chat.me.firstName}\r\n                    </div>\r\n                    <div className=\"m-1 \" style={{ width: '10rem' }}>\r\n                      {sender.username}\r\n                    </div>\r\n                    <div className=\"m-1\" style={{ width: '35rem' }}>\r\n                      {sender.messages[sender?.messages.length - 1].my ? (\r\n                        `Me: ${\r\n                          sender.messages[sender.messages.length - 1].message\r\n                        }`\r\n                      ) : (\r\n                        <b>\r\n                          {`${sender.username || sender.firstName}: ${\r\n                            sender.messages[sender.messages.length - 1].message\r\n                          }`}\r\n                        </b>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"m-1\" style={{ width: '5rem' }}>\r\n                      <Link\r\n                        onClick={() => {\r\n                          setSender(sender);\r\n                          setSelectedChat(chat);\r\n                          setOpenShow(true);\r\n                        }}\r\n                      >\r\n                        Написать\r\n                      </Link>\r\n                    </div>\r\n                  </ListGroup.Item>\r\n                );\r\n              }\r\n            });\r\n          })}\r\n        </ListGroup>\r\n        <DialogModal\r\n          show={openShow}\r\n          onHide={setOpenShow}\r\n          senderData={sender}\r\n          chat={selectedChat}\r\n        />\r\n      </Card>\r\n    </Container>\r\n  );\r\n});\r\n\r\nexport default MonitoringDialogs;\r\n"],"mappings":"yKAAA,OAASA,IAAI,KAAQ,MAAM,CAC3B,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,MAAOC,MAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,OAASC,IAAI,CAAEC,SAAS,CAAEC,SAAS,KAAQ,iBAAiB,CAC5D,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,OAAO,KAAQ,IAAI,CAC5B,MAAOC,YAAW,KAAM,6CAA6C,CAAC,wFAEtE,GAAMC,kBAAiB,CAAGX,QAAQ,CAAC,UAAM,CACvC,gBAA4BE,UAAU,CAACO,OAAO,CAAC,CAAvCG,eAAe,aAAfA,eAAe,CAEvB,cAAgCR,QAAQ,CAAC,KAAK,CAAC,wCAAxCS,QAAQ,eAAEC,WAAW,eAC5B,eAA4BV,QAAQ,CAAC,CAAC,CAAC,CAAC,yCAAjCW,MAAM,eAAEC,SAAS,eACxB,eAAwCZ,QAAQ,CAAC,CAAC,CAAC,CAAC,yCAA7Ca,YAAY,eAAEC,eAAe,eAEpCf,SAAS,CAAC,UAAM,CACdgB,OAAO,CAACC,GAAG,CAACrB,IAAI,CAACa,eAAe,CAACS,OAAO,CAAC,CAAC,CAC5C,CAAC,CAAE,CAACT,eAAe,CAACU,MAAM,CAACC,MAAM,CAAC,CAAC,CAEnC,mBACE,KAAC,SAAS,EAAC,SAAS,CAAC,iBAAiB,uBACpC,MAAC,IAAI,yBACH,KAAC,SAAS,EAAC,OAAO,CAAC,OAAO,uBACxB,MAAC,SAAS,CAAC,IAAI,EAAC,SAAS,CAAC,+DAA+D,wBACzF,YAAK,SAAS,CAAC,MAAM,CAAC,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAQ,CAAE,UAAC,4CAE/C,EAAM,cACN,YAAK,SAAS,CAAC,MAAM,CAAC,KAAK,CAAE,CAAEA,KAAK,CAAE,OAAQ,CAAE,UAAC,0BAEjD,EAAM,cACN,YAAK,SAAS,CAAC,eAAe,UAAC,+GAAmB,EAAM,cACxD,YAAK,SAAS,CAAC,KAAK,CAAC,KAAK,CAAE,CAAEA,KAAK,CAAE,MAAO,CAAE,EAAO,GACtC,EACP,cACZ,KAAC,SAAS,EAAC,OAAO,CAAC,OAAO,UACvBZ,eAAe,CAACa,KAAK,CAACC,GAAG,CAAC,SAACC,IAAI,CAAK,CACnC,MAAOA,KAAI,CAACN,OAAO,CAACK,GAAG,CAAC,SAACX,MAAM,CAAEa,KAAK,CAAK,CACzC,GAAIb,MAAM,CAACc,QAAQ,CAACN,MAAM,CAAE,CAC1B,mBACE,MAAC,SAAS,CAAC,IAAI,EAEb,SAAS,CAAC,+DAA+D,wBAEzE,YAAK,SAAS,CAAC,MAAM,CAAC,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAQ,CAAE,UAC7CG,IAAI,CAACG,EAAE,CAACC,QAAQ,EAAIJ,IAAI,CAACG,EAAE,CAACE,SAAS,EAClC,cACN,YAAK,SAAS,CAAC,MAAM,CAAC,KAAK,CAAE,CAAER,KAAK,CAAE,OAAQ,CAAE,UAC7CT,MAAM,CAACgB,QAAQ,EACZ,cACN,YAAK,SAAS,CAAC,KAAK,CAAC,KAAK,CAAE,CAAEP,KAAK,CAAE,OAAQ,CAAE,UAC5CT,MAAM,CAACc,QAAQ,CAAC,CAAAd,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEc,QAAQ,CAACN,MAAM,EAAG,CAAC,CAAC,CAACU,EAAE,eAE5ClB,MAAM,CAACc,QAAQ,CAACd,MAAM,CAACc,QAAQ,CAACN,MAAM,CAAG,CAAC,CAAC,CAACW,OAAO,eAGrD,6BACMnB,MAAM,CAACgB,QAAQ,EAAIhB,MAAM,CAACiB,SAAS,cACrCjB,MAAM,CAACc,QAAQ,CAACd,MAAM,CAACc,QAAQ,CAACN,MAAM,CAAG,CAAC,CAAC,CAACW,OAAO,GAGxD,EACG,cACN,YAAK,SAAS,CAAC,KAAK,CAAC,KAAK,CAAE,CAAEV,KAAK,CAAE,MAAO,CAAE,uBAC5C,KAAC,IAAI,EACH,OAAO,CAAE,kBAAM,CACbR,SAAS,CAACD,MAAM,CAAC,CACjBG,eAAe,CAACS,IAAI,CAAC,CACrBb,WAAW,CAAC,IAAI,CAAC,CACnB,CAAE,UACH,kDAED,EAAO,EACH,GAhCDc,KAAK,CAiCK,CAErB,CACF,CAAC,CAAC,CACJ,CAAC,CAAC,EACQ,cACZ,KAAC,WAAW,EACV,IAAI,CAAEf,QAAS,CACf,MAAM,CAAEC,WAAY,CACpB,UAAU,CAAEC,MAAO,CACnB,IAAI,CAAEE,YAAa,EACnB,GACG,EACG,CAEhB,CAAC,CAAC,CAEF,cAAeN,kBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}