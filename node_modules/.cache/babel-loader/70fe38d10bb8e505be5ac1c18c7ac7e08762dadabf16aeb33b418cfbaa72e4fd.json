{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{makeAutoObservable}from'mobx';import{login as _login,logout as _logout,refresh,registration as _registration}from'../http/userApi';var UserStore=/*#__PURE__*/function(){function UserStore(){_classCallCheck(this,UserStore);this._isAuth=false;this._user={};this._isLoading=true;makeAutoObservable(this);}_createClass(UserStore,[{key:\"setIsAuth\",value:function setIsAuth(bool){this._isAuth=bool;}},{key:\"setUser\",value:function setUser(user){this._user=user;}},{key:\"setIsLoading\",value:function setIsLoading(bool){this._isLoading=bool;}},{key:\"isAuth\",get:function get(){return this._isAuth;}},{key:\"user\",get:function get(){return this._user;}},{key:\"isLoading\",get:function get(){return this._isLoading;}},{key:\"login\",value:function(){var _login2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _login(email,password);case 3:data=_context.sent;this.setIsAuth(true);this.setUser(data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,this,[[0,8]]);}));function login(_x,_x2){return _login2.apply(this,arguments);}return login;}()},{key:\"registration\",value:function(){var _registration2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(email,password){var data,_e$response,_e$response$data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _registration(email,password);case 3:data=_context2.sent;this.setIsAuth(true);this.setUser(data);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log((_e$response=_context2.t0.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.message);case 11:case\"end\":return _context2.stop();}},_callee2,this,[[0,8]]);}));function registration(_x3,_x4){return _registration2.apply(this,arguments);}return registration;}()},{key:\"logout\",value:function(){var _logout2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var _e$response2,_e$response2$data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return _logout();case 3:localStorage.removeItem('token');this.setIsAuth(false);this.setUser({});_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log((_e$response2=_context3.t0.response)===null||_e$response2===void 0?void 0:(_e$response2$data=_e$response2.data)===null||_e$response2$data===void 0?void 0:_e$response2$data.message);case 11:case\"end\":return _context3.stop();}},_callee3,this,[[0,8]]);}));function logout(){return _logout2.apply(this,arguments);}return logout;}()},{key:\"checkAuth\",value:function(){var _checkAuth=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var data,_e$response3,_e$response3$data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:this.setIsLoading(true);_context4.prev=1;_context4.next=4;return refresh();case 4:data=_context4.sent;this.setIsAuth(true);this.setUser(data);_context4.next=12;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](1);console.log((_e$response3=_context4.t0.response)===null||_e$response3===void 0?void 0:(_e$response3$data=_e$response3.data)===null||_e$response3$data===void 0?void 0:_e$response3$data.message);case 12:_context4.prev=12;this.setIsLoading(false);return _context4.finish(12);case 15:case\"end\":return _context4.stop();}},_callee4,this,[[1,9,12,15]]);}));function checkAuth(){return _checkAuth.apply(this,arguments);}return checkAuth;}()}]);return UserStore;}();export{UserStore as default};","map":{"version":3,"names":["makeAutoObservable","login","logout","refresh","registration","UserStore","_isAuth","_user","_isLoading","bool","user","email","password","data","setIsAuth","setUser","console","log","response","message","localStorage","removeItem","setIsLoading"],"sources":["C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/src/store/UserStore.js"],"sourcesContent":["import { makeAutoObservable } from 'mobx';\r\nimport { login, logout, refresh, registration } from '../http/userApi';\r\n\r\nexport default class UserStore {\r\n  constructor() {\r\n    this._isAuth = false;\r\n    this._user = {};\r\n    this._isLoading = true;\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  setIsAuth(bool) {\r\n    this._isAuth = bool;\r\n  }\r\n\r\n  setUser(user) {\r\n    this._user = user;\r\n  }\r\n\r\n  setIsLoading(bool) {\r\n    this._isLoading = bool;\r\n  }\r\n\r\n  get isAuth() {\r\n    return this._isAuth;\r\n  }\r\n\r\n  get user() {\r\n    return this._user;\r\n  }\r\n\r\n  get isLoading() {\r\n    return this._isLoading;\r\n  }\r\n\r\n  async login(email, password) {\r\n    try {\r\n      const data = await login(email, password);\r\n      this.setIsAuth(true);\r\n      this.setUser(data);\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n\r\n  async registration(email, password) {\r\n    try {\r\n      const data = await registration(email, password);\r\n      this.setIsAuth(true);\r\n      this.setUser(data);\r\n    } catch (e) {\r\n      console.log(e.response?.data?.message);\r\n    }\r\n  }\r\n\r\n  async logout() {\r\n    try {\r\n      await logout();\r\n      localStorage.removeItem('token');\r\n      this.setIsAuth(false);\r\n      this.setUser({});\r\n    } catch (e) {\r\n      console.log(e.response?.data?.message);\r\n    }\r\n  }\r\n\r\n  async checkAuth() {\r\n    this.setIsLoading(true);\r\n    try {\r\n      const data = await refresh();\r\n      this.setIsAuth(true);\r\n      this.setUser(data);\r\n    } catch (e) {\r\n      console.log(e.response?.data?.message);\r\n    } finally {\r\n      this.setIsLoading(false);\r\n    }\r\n  }\r\n}\r\n"],"mappings":"krBAAA,OAASA,kBAAkB,KAAQ,MAAM,CACzC,OAASC,KAAK,GAALA,OAAK,CAAEC,MAAM,GAANA,QAAM,CAAEC,OAAO,CAAEC,YAAY,GAAZA,cAAY,KAAQ,iBAAiB,CAAC,GAElDC,UAAS,yBAC5B,oBAAc,iCACZ,IAAI,CAACC,OAAO,CAAG,KAAK,CACpB,IAAI,CAACC,KAAK,CAAG,CAAC,CAAC,CACf,IAAI,CAACC,UAAU,CAAG,IAAI,CACtBR,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,+CAED,mBAAUS,IAAI,CAAE,CACd,IAAI,CAACH,OAAO,CAAGG,IAAI,CACrB,CAAC,uBAED,iBAAQC,IAAI,CAAE,CACZ,IAAI,CAACH,KAAK,CAAGG,IAAI,CACnB,CAAC,4BAED,sBAAaD,IAAI,CAAE,CACjB,IAAI,CAACD,UAAU,CAAGC,IAAI,CACxB,CAAC,oBAED,cAAa,CACX,MAAO,KAAI,CAACH,OAAO,CACrB,CAAC,kBAED,cAAW,CACT,MAAO,KAAI,CAACC,KAAK,CACnB,CAAC,uBAED,cAAgB,CACd,MAAO,KAAI,CAACC,UAAU,CACxB,CAAC,sGAED,iBAAYG,KAAK,CAAEC,QAAQ,kKAEJX,OAAK,CAACU,KAAK,CAAEC,QAAQ,CAAC,QAAnCC,IAAI,eACV,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC,CACpB,IAAI,CAACC,OAAO,CAACF,IAAI,CAAC,CAAC,+EAEnBG,OAAO,CAACC,GAAG,aAAG,CAAC,mEAElB,oMAED,kBAAmBN,KAAK,CAAEC,QAAQ,qMAEXR,cAAY,CAACO,KAAK,CAAEC,QAAQ,CAAC,QAA1CC,IAAI,gBACV,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC,CACpB,IAAI,CAACC,OAAO,CAACF,IAAI,CAAC,CAAC,mFAEnBG,OAAO,CAACC,GAAG,cAAC,aAAEC,QAAQ,wDAAV,YAAYL,IAAI,2CAAhB,iBAAkBM,OAAO,CAAC,CAAC,qEAE1C,8MAED,oNAEUjB,QAAM,EAAE,QACdkB,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC,CAChC,IAAI,CAACP,SAAS,CAAC,KAAK,CAAC,CACrB,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,mFAEjBC,OAAO,CAACC,GAAG,eAAC,aAAEC,QAAQ,0DAAV,aAAYL,IAAI,4CAAhB,kBAAkBM,OAAO,CAAC,CAAC,qEAE1C,0LAED,iLACE,IAAI,CAACG,YAAY,CAAC,IAAI,CAAC,CAAC,wCAEHnB,QAAO,EAAE,QAAtBU,IAAI,gBACV,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC,CACpB,IAAI,CAACC,OAAO,CAACF,IAAI,CAAC,CAAC,mFAEnBG,OAAO,CAACC,GAAG,eAAC,aAAEC,QAAQ,0DAAV,aAAYL,IAAI,4CAAhB,kBAAkBM,OAAO,CAAC,CAAC,0BAEvC,IAAI,CAACG,YAAY,CAAC,KAAK,CAAC,CAAC,uGAE5B,qHA1EkBjB,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}