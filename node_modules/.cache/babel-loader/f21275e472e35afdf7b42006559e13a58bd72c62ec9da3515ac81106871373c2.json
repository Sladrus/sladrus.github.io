{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useContext}from'react';import{Button,Modal}from'react-bootstrap';import{Context}from'../../..';import{deleteChat,unlinkFromAccount}from'../../../http/chatApi';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DeleteChat=function DeleteChat(_ref){var show=_ref.show,_onHide=_ref.onHide,chat=_ref.chat;var _useContext=useContext(Context),telegramService=_useContext.telegramService;var removeChat=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _chat$client;var res,resp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return(_chat$client=chat.client)===null||_chat$client===void 0?void 0:_chat$client.disconnect();case 2:res=telegramService.chats.filter(function(o){return o.link!==chat.link;});telegramService.chats=res;_context.prev=4;_context.next=7;return unlinkFromAccount(chat._id);case 7:_context.next=11;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](4);case 11:_context.next=13;return deleteChat(chat._id);case 13:resp=_context.sent;console.log(resp);_onHide();case 16:case\"end\":return _context.stop();}},_callee,null,[[4,9]]);}));return function removeChat(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Modal,{size:\"lg\",show:show,onHide:function onHide(){return _onHide();},\"aria-labelledby\":\"example-modal-sizes-title-lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{id:\"example-modal-sizes-title-lg\",children:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\\"\".concat(chat.link,\"\\\"\")})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-grid pb-3\",children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"lg\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return removeChat();case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}},_callee2);})),children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",size:\"lg\",onClick:function onClick(){return _onHide();},children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})})]})]});};export default DeleteChat;","map":{"version":3,"names":["React","useContext","Button","Modal","Context","deleteChat","unlinkFromAccount","DeleteChat","show","onHide","chat","telegramService","removeChat","client","disconnect","res","chats","filter","o","link","_id","resp","console","log"],"sources":["C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/src/components/modals/monitoring/DeleteChat.js"],"sourcesContent":["import React, { useContext } from 'react';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport { Context } from '../../..';\r\nimport { deleteChat, unlinkFromAccount } from '../../../http/chatApi';\r\n\r\nconst DeleteChat = ({ show, onHide, chat }) => {\r\n  const { telegramService } = useContext(Context);\r\n\r\n  const removeChat = async () => {\r\n    await chat.client?.disconnect();\r\n    const res = telegramService.chats.filter((o) => o.link !== chat.link);\r\n    telegramService.chats = res;\r\n    try {\r\n      await unlinkFromAccount(chat._id);\r\n    } catch (error) {}\r\n    const resp = await deleteChat(chat._id);\r\n    console.log(resp);\r\n\r\n    onHide();\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      size=\"lg\"\r\n      show={show}\r\n      onHide={() => onHide()}\r\n      aria-labelledby=\"example-modal-sizes-title-lg\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"example-modal-sizes-title-lg\">\r\n          {`Вы уверены, что хотите удалить \"${chat.link}\"`}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className=\"d-grid pb-3\">\r\n          <Button\r\n            variant=\"danger\"\r\n            size=\"lg\"\r\n            onClick={async () => await removeChat()}\r\n          >\r\n            Удалить\r\n          </Button>\r\n        </div>\r\n        <div className=\"d-grid\">\r\n          <Button variant=\"secondary\" size=\"lg\" onClick={() => onHide()}>\r\n            Закрыть\r\n          </Button>\r\n        </div>\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default DeleteChat;\r\n"],"mappings":"kWAAA,MAAOA,MAAK,EAAIC,UAAU,KAAQ,OAAO,CACzC,OAASC,MAAM,CAAEC,KAAK,KAAQ,iBAAiB,CAC/C,OAASC,OAAO,KAAQ,UAAU,CAClC,OAASC,UAAU,CAAEC,iBAAiB,KAAQ,uBAAuB,CAAC,wFAEtE,GAAMC,WAAU,CAAG,QAAbA,WAAU,MAA+B,IAAzBC,KAAI,MAAJA,IAAI,CAAEC,OAAM,MAANA,MAAM,CAAEC,IAAI,MAAJA,IAAI,CACtC,gBAA4BT,UAAU,CAACG,OAAO,CAAC,CAAvCO,eAAe,aAAfA,eAAe,CAEvB,GAAMC,WAAU,6FAAG,sMACXF,IAAI,CAACG,MAAM,uCAAX,aAAaC,UAAU,EAAE,QACzBC,GAAG,CAAGJ,eAAe,CAACK,KAAK,CAACC,MAAM,CAAC,SAACC,CAAC,QAAKA,EAAC,CAACC,IAAI,GAAKT,IAAI,CAACS,IAAI,GAAC,CACrER,eAAe,CAACK,KAAK,CAAGD,GAAG,CAAC,sCAEpBT,kBAAiB,CAACI,IAAI,CAACU,GAAG,CAAC,sHAEhBf,WAAU,CAACK,IAAI,CAACU,GAAG,CAAC,SAAjCC,IAAI,eACVC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC,CAEjBZ,OAAM,EAAE,CAAC,mEACV,kBAXKG,WAAU,2CAWf,CAED,mBACE,MAAC,KAAK,EACJ,IAAI,CAAC,IAAI,CACT,IAAI,CAAEJ,IAAK,CACX,MAAM,CAAE,wBAAMC,QAAM,EAAE,EAAC,CACvB,kBAAgB,8BAA8B,wBAE9C,KAAC,KAAK,CAAC,MAAM,EAAC,WAAW,4BACvB,KAAC,KAAK,CAAC,KAAK,EAAC,EAAE,CAAC,8BAA8B,kLACRC,IAAI,CAACS,IAAI,QACjC,EACD,cACf,MAAC,KAAK,CAAC,IAAI,yBACT,YAAK,SAAS,CAAC,aAAa,uBAC1B,KAAC,MAAM,EACL,OAAO,CAAC,QAAQ,CAChB,IAAI,CAAC,IAAI,CACT,OAAO,wEAAE,gKAAkBP,WAAU,EAAE,kHAAC,UACzC,4CAED,EAAS,EACL,cACN,YAAK,SAAS,CAAC,QAAQ,uBACrB,KAAC,MAAM,EAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAE,yBAAMH,QAAM,EAAE,EAAC,UAAC,4CAE/D,EAAS,EACL,GACK,GACP,CAEZ,CAAC,CAED,cAAeF,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}