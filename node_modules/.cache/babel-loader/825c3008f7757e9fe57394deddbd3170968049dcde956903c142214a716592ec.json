{"ast":null,"code":"import _slicedToArray from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{toJS}from'mobx';import{observer}from'mobx-react-lite';import React,{useContext,useEffect,useState}from'react';import{Card,Dropdown,NavDropdown}from'react-bootstrap';import{Context}from'..';import DeleteChat from'./modals/monitoring/DeleteChat';import OpenModal from'./modals/monitoring/OpenModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatCard=observer(function(_ref){var _chat$entity,_chat$requests,_chat$requests2,_chat$requests3;var chat=_ref.chat;var _useContext=useContext(Context),telegramService=_useContext.telegramService,keysStore=_useContext.keysStore;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),selectedChat=_useState2[0],setSelectedChat=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),deleteShow=_useState4[0],setDeleteShow=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openShow=_useState6[0],setOpenShow=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),active=_useState8[0],setActive=_useState8[1];useEffect(function(){if(chat.active){setActive(true);}else{telegramService.startMonitor(chat);}},[chat.active]);var changeKeys=function changeKeys(o){chat.keys=o;};return/*#__PURE__*/_jsx(\"div\",{className:\"p-2 flex-fill\",children:/*#__PURE__*/_jsx(Card,{className:\"d-flex\",style:active?{minHeight:'8rem',backgroundColor:'#abf7b1'}:{minHeight:'8rem',backgroundColor:'#ffcccb'},children:/*#__PURE__*/_jsxs(Card.Body,{className:\"d-flex flex-row justify-content-start align-content-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card.Title,{className:\"text-nowrap fs-6 text mb-1\",children:chat.entity&&\"\".concat((_chat$entity=chat.entity)===null||_chat$entity===void 0?void 0:_chat$entity.title)}),/*#__PURE__*/_jsx(Card.Subtitle,{className:\"text-nowrap fs-6 text mb-2\",children:\"\".concat(chat.link)}),/*#__PURE__*/_jsx(Card.Subtitle,{className:\"mb-2 text-muted\",children:/*#__PURE__*/_jsx(NavDropdown,{id:\"dropdown-item-button\",title:\"\\u041A\\u043B\\u044E\\u0447 \\\"\".concat(chat.keys.title,\"\\\"\"),children:keysStore.keys.map(function(o,index){return/*#__PURE__*/_jsx(Dropdown.Item,{as:\"button\",onClick:function onClick(){return changeKeys(o);},children:\"\".concat(o.title,\" - \").concat(o.list)},index);})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card.Link,{style:{color:'red'},onClick:function onClick(){setSelectedChat(chat);setDeleteShow(true);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(DeleteChat,{show:deleteShow,onHide:setDeleteShow,chat:selectedChat}),/*#__PURE__*/_jsx(Card.Link,{onClick:function onClick(){setSelectedChat(chat);setOpenShow(true);},children:\"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C\"}),/*#__PURE__*/_jsx(OpenModal,{show:openShow,onHide:setOpenShow,chat:selectedChat,senders:telegramService.senders})]})]}),/*#__PURE__*/_jsx(Card.Text,{className:\"ps-3\",children:chat!==null&&chat!==void 0&&(_chat$requests=chat.requests)!==null&&_chat$requests!==void 0&&_chat$requests.length?\"\".concat((_chat$requests2=chat.requests[chat.requests.length-1])===null||_chat$requests2===void 0?void 0:_chat$requests2.username,\": \").concat((_chat$requests3=chat.requests[chat.requests.length-1])===null||_chat$requests3===void 0?void 0:_chat$requests3.text):''})]})})});});export default ChatCard;","map":{"version":3,"names":["toJS","observer","React","useContext","useEffect","useState","Card","Dropdown","NavDropdown","Context","DeleteChat","OpenModal","ChatCard","chat","telegramService","keysStore","selectedChat","setSelectedChat","deleteShow","setDeleteShow","openShow","setOpenShow","active","setActive","startMonitor","changeKeys","o","keys","minHeight","backgroundColor","entity","title","link","map","index","list","color","senders","requests","length","username","text"],"sources":["C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/src/components/ChatCard.js"],"sourcesContent":["import { toJS } from 'mobx';\r\nimport { observer } from 'mobx-react-lite';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { Card, Dropdown, NavDropdown } from 'react-bootstrap';\r\nimport { Context } from '..';\r\nimport DeleteChat from './modals/monitoring/DeleteChat';\r\nimport OpenModal from './modals/monitoring/OpenModal';\r\n\r\nconst ChatCard = observer(({ chat }) => {\r\n  const { telegramService, keysStore } = useContext(Context);\r\n  const [selectedChat, setSelectedChat] = useState(false);\r\n\r\n  const [deleteShow, setDeleteShow] = useState(false);\r\n  const [openShow, setOpenShow] = useState(false);\r\n\r\n  const [active, setActive] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (chat.active) {\r\n      setActive(true);\r\n    } else {\r\n      telegramService.startMonitor(chat);\r\n    }\r\n  }, [chat.active]);\r\n\r\n  const changeKeys = (o) => {\r\n    chat.keys = o;\r\n  };\r\n  return (\r\n    <div className=\"p-2 flex-fill\">\r\n      <Card\r\n        className=\"d-flex\"\r\n        style={\r\n          active\r\n            ? { minHeight: '8rem', backgroundColor: '#abf7b1' }\r\n            : { minHeight: '8rem', backgroundColor: '#ffcccb' }\r\n        }\r\n      >\r\n        <Card.Body className=\"d-flex flex-row justify-content-start align-content-start\">\r\n          <div>\r\n            <Card.Title className=\"text-nowrap fs-6 text mb-1\">\r\n              {chat.entity && `${chat.entity?.title}`}\r\n            </Card.Title>\r\n            <Card.Subtitle className=\"text-nowrap fs-6 text mb-2\">{`${chat.link}`}</Card.Subtitle>\r\n            <Card.Subtitle className=\"mb-2 text-muted\">\r\n              <NavDropdown\r\n                id=\"dropdown-item-button\"\r\n                title={`Ключ \"${chat.keys.title}\"`}\r\n              >\r\n                {keysStore.keys.map((o, index) => {\r\n                  return (\r\n                    <Dropdown.Item\r\n                      key={index}\r\n                      as=\"button\"\r\n                      onClick={() => changeKeys(o)}\r\n                    >\r\n                      {`${o.title} - ${o.list}`}\r\n                    </Dropdown.Item>\r\n                  );\r\n                })}\r\n              </NavDropdown>\r\n            </Card.Subtitle>\r\n            <div>\r\n              <Card.Link\r\n                style={{ color: 'red' }}\r\n                onClick={() => {\r\n                  setSelectedChat(chat);\r\n                  setDeleteShow(true);\r\n                }}\r\n              >\r\n                Удалить\r\n              </Card.Link>\r\n              <DeleteChat\r\n                show={deleteShow}\r\n                onHide={setDeleteShow}\r\n                chat={selectedChat}\r\n              />\r\n              <Card.Link\r\n                onClick={() => {\r\n                  setSelectedChat(chat);\r\n                  setOpenShow(true);\r\n                }}\r\n              >\r\n                Открыть\r\n              </Card.Link>\r\n              <OpenModal\r\n                show={openShow}\r\n                onHide={setOpenShow}\r\n                chat={selectedChat}\r\n                senders={telegramService.senders}\r\n              />\r\n            </div>\r\n          </div>\r\n          <Card.Text className=\"ps-3\">\r\n            {chat?.requests?.length\r\n              ? `${chat.requests[chat.requests.length - 1]?.username}: ${\r\n                  chat.requests[chat.requests.length - 1]?.text\r\n                }`\r\n              : ''}\r\n          </Card.Text>\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default ChatCard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}