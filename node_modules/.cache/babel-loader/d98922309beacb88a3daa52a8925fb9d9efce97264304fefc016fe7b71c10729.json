{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import jwt_decode from'jwt-decode';import $api from'.';export var registration=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){var _yield$$api$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return $api.post(\"\".concat(process.env.REACT_APP_API_URl,\"api/user/registration\"),{email:email,password:password});case 2:_yield$$api$post=_context.sent;data=_yield$$api$post.data;localStorage.setItem('token',data.accessToken);return _context.abrupt(\"return\",jwt_decode(data.accessToken));case 6:case\"end\":return _context.stop();}},_callee);}));return function registration(_x,_x2){return _ref.apply(this,arguments);};}();export var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(email,password){var _yield$$api$post2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return $api.post(\"\".concat(process.env.REACT_APP_API_URl,\"api/user/login\"),{email:email,password:password});case 2:_yield$$api$post2=_context2.sent;data=_yield$$api$post2.data;localStorage.setItem('token',data.accessToken);return _context2.abrupt(\"return\",jwt_decode(data.accessToken));case 6:case\"end\":return _context2.stop();}},_callee2);}));return function login(_x3,_x4){return _ref2.apply(this,arguments);};}();export var logout=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var resp;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return $api.post(\"\".concat(process.env.REACT_APP_API_URl,\"api/user/logout\"));case 2:resp=_context3.sent;return _context3.abrupt(\"return\",resp);case 4:case\"end\":return _context3.stop();}},_callee3);}));return function logout(){return _ref3.apply(this,arguments);};}();export var refresh=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var _yield$$api$post3,data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return $api.post(\"\".concat(process.env.REACT_APP_API_URl,\"api/user/refresh\"),{withCredentials:true});case 2:_yield$$api$post3=_context4.sent;data=_yield$$api$post3.data;localStorage.setItem('token',data.accessToken);return _context4.abrupt(\"return\",jwt_decode(data.accessToken));case 6:case\"end\":return _context4.stop();}},_callee4);}));return function refresh(){return _ref4.apply(this,arguments);};}();","map":{"version":3,"names":["jwt_decode","$api","registration","email","password","post","process","env","REACT_APP_API_URl","data","localStorage","setItem","accessToken","login","logout","resp","refresh","withCredentials"],"sources":["C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/src/http/userApi.js"],"sourcesContent":["import jwt_decode from 'jwt-decode';\r\nimport $api from '.';\r\n\r\nexport const registration = async (email, password) => {\r\n  const { data } = await $api.post(\r\n    `${process.env.REACT_APP_API_URl}api/user/registration`,\r\n    {\r\n      email,\r\n      password,\r\n    }\r\n  );\r\n  localStorage.setItem('token', data.accessToken);\r\n  return jwt_decode(data.accessToken);\r\n};\r\n\r\nexport const login = async (email, password) => {\r\n  const { data } = await $api.post(\r\n    `${process.env.REACT_APP_API_URl}api/user/login`,\r\n    { email, password }\r\n  );\r\n  localStorage.setItem('token', data.accessToken);\r\n  return jwt_decode(data.accessToken);\r\n};\r\n\r\nexport const logout = async () => {\r\n  const resp = await $api.post(\r\n    `${process.env.REACT_APP_API_URl}api/user/logout`\r\n  );\r\n\r\n  return resp;\r\n};\r\n\r\nexport const refresh = async () => {\r\n  const { data } = await $api.post(\r\n    `${process.env.REACT_APP_API_URl}api/user/refresh`,\r\n    {\r\n      withCredentials: true,\r\n    }\r\n  );\r\n  localStorage.setItem('token', data.accessToken);\r\n  return jwt_decode(data.accessToken);\r\n};\r\n"],"mappings":"kWAAA,MAAOA,WAAU,KAAM,YAAY,CACnC,MAAOC,KAAI,KAAM,GAAG,CAEpB,MAAO,IAAMC,aAAY,4FAAG,iBAAOC,KAAK,CAAEC,QAAQ,mKACzBH,KAAI,CAACI,IAAI,WAC3BC,OAAO,CAACC,GAAG,CAACC,iBAAiB,0BAChC,CACEL,KAAK,CAALA,KAAK,CACLC,QAAQ,CAARA,QACF,CAAC,CACF,uCANOK,IAAI,kBAAJA,IAAI,CAOZC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEF,IAAI,CAACG,WAAW,CAAC,CAAC,gCACzCZ,UAAU,CAACS,IAAI,CAACG,WAAW,CAAC,uDACpC,kBAVYV,aAAY,gDAUxB,CAED,MAAO,IAAMW,MAAK,6FAAG,kBAAOV,KAAK,CAAEC,QAAQ,yKAClBH,KAAI,CAACI,IAAI,WAC3BC,OAAO,CAACC,GAAG,CAACC,iBAAiB,mBAChC,CAAEL,KAAK,CAALA,KAAK,CAAEC,QAAQ,CAARA,QAAS,CAAC,CACpB,yCAHOK,IAAI,mBAAJA,IAAI,CAIZC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEF,IAAI,CAACG,WAAW,CAAC,CAAC,iCACzCZ,UAAU,CAACS,IAAI,CAACG,WAAW,CAAC,yDACpC,kBAPYC,MAAK,kDAOjB,CAED,MAAO,IAAMC,OAAM,6FAAG,yKACDb,KAAI,CAACI,IAAI,WACvBC,OAAO,CAACC,GAAG,CAACC,iBAAiB,oBACjC,QAFKO,IAAI,iDAIHA,IAAI,yDACZ,kBANYD,OAAM,2CAMlB,CAED,MAAO,IAAME,QAAO,6FAAG,2LACEf,KAAI,CAACI,IAAI,WAC3BC,OAAO,CAACC,GAAG,CAACC,iBAAiB,qBAChC,CACES,eAAe,CAAE,IACnB,CAAC,CACF,yCALOR,IAAI,mBAAJA,IAAI,CAMZC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEF,IAAI,CAACG,WAAW,CAAC,CAAC,iCACzCZ,UAAU,CAACS,IAAI,CAACG,WAAW,CAAC,yDACpC,kBATYI,QAAO,2CASnB"},"metadata":{},"sourceType":"module","externalDependencies":[]}