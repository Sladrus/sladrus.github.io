{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{makeAutoObservable}from'mobx';import{createProject as _createProject,deleteProject as _deleteProject,fetchOneProject as _fetchOneProject,fetchProjects as _fetchProjects,link as _link,unlink as _unlink,updateProject as _updateProject}from'../http/projectApi';var ProjectStore=/*#__PURE__*/function(){function ProjectStore(){_classCallCheck(this,ProjectStore);this._projects=[];this._isLoading=false;makeAutoObservable(this);}_createClass(ProjectStore,[{key:\"setProjects\",value:function setProjects(projects){this._projects=projects;}},{key:\"setIsLoading\",value:function setIsLoading(bool){this._isLoading=bool;}},{key:\"projects\",get:function get(){return this._projects;}},{key:\"isLoading\",get:function get(){return this._isLoading;}},{key:\"createProject\",value:function(){var _createProject2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(body){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:this.setIsLoading(true);_context.prev=1;_context.next=4;return _createProject(body);case 4:data=_context.sent;this.setProjects([].concat(_toConsumableArray(this.projects),[data]));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 11:_context.prev=11;this.setIsLoading(false);return _context.finish(11);case 14:case\"end\":return _context.stop();}},_callee,this,[[1,8,11,14]]);}));function createProject(_x){return _createProject2.apply(this,arguments);}return createProject;}()},{key:\"updateProject\",value:function(){var _updateProject2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(body){var data,oldProject;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:this.setIsLoading(true);_context2.prev=1;_context2.next=4;return _updateProject(body);case 4:data=_context2.sent;oldProject=this.projects.findIndex(function(project){return project.id===data.id;});this.projects.splice(oldProject,1);this.setProjects([].concat(_toConsumableArray(this.projects),[data]));_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 13:_context2.prev=13;this.setIsLoading(false);return _context2.finish(13);case 16:case\"end\":return _context2.stop();}},_callee2,this,[[1,10,13,16]]);}));function updateProject(_x2){return _updateProject2.apply(this,arguments);}return updateProject;}()},{key:\"fetchProjects\",value:function(){var _fetchProjects2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:this.setIsLoading(true);_context3.prev=1;_context3.next=4;return _fetchProjects();case 4:data=_context3.sent;console.log(data);this.setProjects(data);_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0);case 12:_context3.prev=12;this.setIsLoading(false);return _context3.finish(12);case 15:case\"end\":return _context3.stop();}},_callee3,this,[[1,9,12,15]]);}));function fetchProjects(){return _fetchProjects2.apply(this,arguments);}return fetchProjects;}()},{key:\"fetchOneProject\",value:function(){var _fetchOneProject2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id){var data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return _fetchOneProject(id);case 3:data=_context4.sent;return _context4.abrupt(\"return\",data);case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 10:_context4.prev=10;return _context4.finish(10);case 12:case\"end\":return _context4.stop();}},_callee4,null,[[0,7,10,12]]);}));function fetchOneProject(_x3){return _fetchOneProject2.apply(this,arguments);}return fetchOneProject;}()},{key:\"deleteProject\",value:function(){var _deleteProject2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:this.setIsLoading(true);_context5.prev=1;_context5.next=4;return _deleteProject(id);case 4:this.setProjects(this.projects.filter(function(o){return o.id!==id;}));_context5.next=10;break;case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](1);console.log(_context5.t0);case 10:_context5.prev=10;this.setIsLoading(false);return _context5.finish(10);case 13:case\"end\":return _context5.stop();}},_callee5,this,[[1,7,10,13]]);}));function deleteProject(_x4){return _deleteProject2.apply(this,arguments);}return deleteProject;}()},{key:\"link\",value:function(){var _link2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(id,count){var data;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return _link(id,count);case 3:data=_context6.sent;return _context6.abrupt(\"return\",data);case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](0);console.log(_context6.t0);case 10:case\"end\":return _context6.stop();}},_callee6,null,[[0,7]]);}));function link(_x5,_x6){return _link2.apply(this,arguments);}return link;}()},{key:\"unlink\",value:function(){var _unlink2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(id){var data;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return _unlink(id);case 3:data=_context7.sent;return _context7.abrupt(\"return\",data);case 7:_context7.prev=7;_context7.t0=_context7[\"catch\"](0);console.log(_context7.t0);case 10:case\"end\":return _context7.stop();}},_callee7,null,[[0,7]]);}));function unlink(_x7){return _unlink2.apply(this,arguments);}return unlink;}()}]);return ProjectStore;}();export{ProjectStore as default};","map":{"version":3,"names":["makeAutoObservable","createProject","deleteProject","fetchOneProject","fetchProjects","link","unlink","updateProject","ProjectStore","_projects","_isLoading","projects","bool","body","setIsLoading","data","setProjects","console","log","oldProject","findIndex","project","id","splice","filter","o","count"],"sources":["C:/Users/Yakov/Desktop/projects/node-projects/node-js-key-monitor/sladrus.github.io/src/store/ProjectStore.js"],"sourcesContent":["import { makeAutoObservable } from 'mobx';\r\nimport {\r\n  createProject,\r\n  deleteProject,\r\n  fetchOneProject,\r\n  fetchProjects,\r\n  link,\r\n  unlink,\r\n  updateProject\r\n} from '../http/projectApi';\r\n\r\nexport default class ProjectStore {\r\n  constructor() {\r\n    this._projects = [];\r\n    this._isLoading = false;\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  setProjects(projects) {\r\n    this._projects = projects;\r\n  }\r\n\r\n  setIsLoading(bool) {\r\n    this._isLoading = bool;\r\n  }\r\n\r\n  get projects() {\r\n    return this._projects;\r\n  }\r\n\r\n  get isLoading() {\r\n    return this._isLoading;\r\n  }\r\n\r\n  async createProject(body) {\r\n    this.setIsLoading(true);\r\n    try {\r\n      const data = await createProject(body);\r\n      this.setProjects([...this.projects, data]);\r\n    } catch (e) {\r\n      console.log(e);\r\n    } finally {\r\n      this.setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  async updateProject(body) {\r\n    this.setIsLoading(true);\r\n    try {\r\n      const data = await updateProject(body);\r\n      const oldProject = this.projects.findIndex(\r\n        (project) => project.id === data.id\r\n      );\r\n      this.projects.splice(oldProject, 1);\r\n      this.setProjects([...this.projects, data]);\r\n    } catch (e) {\r\n      console.log(e);\r\n    } finally {\r\n      this.setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  async fetchProjects() {\r\n    this.setIsLoading(true);\r\n    try {\r\n      const data = await fetchProjects();\r\n      console.log(data);\r\n      this.setProjects(data);\r\n    } catch (e) {\r\n      console.log(e);\r\n    } finally {\r\n      this.setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  async fetchOneProject(id) {\r\n    try {\r\n      const data = await fetchOneProject(id);\r\n      return data;\r\n    } catch (e) {\r\n      console.log(e);\r\n    } finally {\r\n    }\r\n  }\r\n\r\n  async deleteProject(id) {\r\n    this.setIsLoading(true);\r\n    try {\r\n      await deleteProject(id);\r\n      this.setProjects(this.projects.filter((o) => o.id !== id));\r\n    } catch (e) {\r\n      console.log(e);\r\n    } finally {\r\n      this.setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  async link(id, count) {\r\n    try {\r\n      const data = await link(id, count);\r\n      return data;\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n  async unlink(id) {\r\n    try {\r\n      const data = await unlink(id);\r\n      return data;\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}